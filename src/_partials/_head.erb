<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<%
  # Page title logic
  resource_title = strip_html(strip_newlines(title))
  full_title = resource_title != "Index" ? "#{resource_title} | #{metadata.title}" : "#{metadata.title}: #{metadata.tagline}"

  # OpenGraph variables - use page-specific or fall back to defaults
  og_title = resource_title != "Index" ? resource_title : metadata.title

  # Description: use page description, then post description, then site default
  og_description = resource.data[:og_description] if resource.data[:og_description].to_s.strip != ""
  og_description ||= resource.data[:description] if resource.data[:description].to_s.strip != ""
  og_description ||= metadata.description

  # Image: use page og_image, then featured_image, then site default
  og_image = resource.data[:og_image] if resource.data[:og_image].to_s.strip != ""
  og_image ||= resource.data[:featured_image] if resource.data[:featured_image].to_s.strip != ""
  og_image ||= metadata.og_default_image || "/images/og-default.png"

  # Type: articles for posts, website for pages
  og_type = resource.data[:layout] == "post" ? "article" : "website"

  canonical_url = "#{metadata.url || site.config.url}#{resource.relative_url}"
%>
<title><%= full_title %></title>

<meta name="description" content="<%= og_description %>" />

<!-- OpenGraph Meta Tags -->
<meta property="og:title" content="<%= og_title %>" />
<meta property="og:description" content="<%= og_description %>" />
<meta property="og:image" content="<%= "#{metadata.url || site.config.url}#{og_image}" %>" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:url" content="<%= canonical_url %>" />
<meta property="og:type" content="<%= og_type %>" />
<meta property="og:site_name" content="<%= metadata.title %>" />
<meta property="og:locale" content="en_US" />

<!-- Twitter Card Meta Tags -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="<%= og_title %>" />
<meta name="twitter:description" content="<%= og_description %>" />
<meta name="twitter:image" content="<%= "#{metadata.url || site.config.url}#{og_image}" %>" />
<% if metadata.twitter_handle %>
<meta name="twitter:site" content="@<%= metadata.twitter_handle %>" />
<% end %>

<!-- Canonical URL -->
<link rel="canonical" href="<%= canonical_url %>" />

<link rel="icon" type="image/svg+xml" href="<%= relative_url '/images/heart_icon.svg' %>" />
<link rel="stylesheet" href="<%= asset_path :css %>" />
<%= render "custom_styles" %>
<script src="<%= asset_path :js %>" defer></script>
<%= live_reload_dev_js %>
