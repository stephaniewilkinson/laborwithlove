<%#
  Recent Blog Posts Partial
  Used by: src/index.erb (homepage)
  Displays the 3 most recent blog posts from the posts collection.
%>
<div class="bg-white dark:bg-section-dark py-20">
  <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-12">
      <h2 class="text-3xl md:text-4xl font-serif font-bold text-primary-900 dark:text-white mb-4">
        From the Blog
      </h2>
      <p class="text-xl text-primary-800 dark:text-white/90">
        Resources, stories, and insights for your birth journey.
      </p>
    </div>

    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
      <% site.collections.posts.resources.sort_by { |p| -p.data.date.to_i }.first(3).each do |post| %>
        <article class="card">
          <time datetime="<%= post.data.date.to_date %>" class="text-sm text-primary-600 dark:text-secondary-300 font-medium">
            <%= post.data.date.strftime("%B %d, %Y") %>
          </time>
          <h3 class="text-xl font-serif font-bold text-primary-900 dark:text-white mt-2 mb-3">
            <a href="<%= post.relative_url %>" class="no-underline hover:text-primary-600 dark:hover:text-secondary-200">
              <%= post.data.title %>
            </a>
          </h3>
          <p class="text-primary-800 dark:text-white/90 text-sm"><%= post.data.description || truncate(strip_html(post.content), 120) %></p>
        </article>
      <% end %>
    </div>

    <div class="text-center mt-10">
      <a href="/posts" class="btn btn-secondary no-underline">
        View All Posts &rarr;
      </a>
    </div>
  </div>
</div>
